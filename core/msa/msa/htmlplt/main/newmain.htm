<HTML><HEAD><TITLE>宝创MSA-网络管理和过滤的领导者</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<LINK rel=stylesheet type=text/css href="/msa/extjs/resources/css/ext-all.css">
<link rel="stylesheet" type="text/css" href="/msa/publiccss/feed-viewer.css" />
<LINK rel=stylesheet type=text/css href="/msa/extjs/resources/css/xtheme-default.css">
<SCRIPT type=text/javascript src="/msa/extjs/adapter/ext/ext-base.js"></SCRIPT>
<SCRIPT type=text/javascript  src="/msa/extjs/ext-all.js"></SCRIPT>
<SCRIPT type=text/javascript  src="msa/htmlplt/publicjs/TreeNodeCheck.js"></SCRIPT>
<script src="/msa/main/JsHelper.js" type="text/javascript"></script>

<STYLE type=text/css>
HTML {
	BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT: 12px verdana; HEIGHT: 100%; OVERFLOW: hidden; BORDER-TOP: 0px; BORDER-RIGHT: 0px; PADDING-TOP: 0px
}
BODY {
	BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; PADDING-BOTTOM: 0px; MARGIN: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; FONT: 12px verdana; HEIGHT: 100%; OVERFLOW: hidden; BORDER-TOP: 0px; BORDER-RIGHT: 0px; PADDING-TOP: 0px
}	
P {
	MARGIN: 5px
}
.settings {
	BACKGROUND-IMAGE: url(/msa/extjs/shared/icons/fam/folder_wrench.png)
}
.nav {
	BACKGROUND-IMAGE: url(/msa/extjs/shared/icons/fam/folder_go.png)
}
.myheader {
	  font:bold 16px tahoma,arial,verdana,sans-serif;
    padding:6px 4px 5px 6px;
    border:1px solid #99bbe8;
    line-height: 40px;
}
</STYLE>
<SCRIPT type=text/javascript  src="/msa/publicjs/pubstyle.js"></SCRIPT>
<script type="text/javascript">
	  
	  Ext.BLANK_IMAGE_URL = '/msa/extjs/resources/images/default/s.gif';
	  
    Ext.onReady(function(){
    
        // NOTE: This is an example showing simple state management. During development,
        // it is generally best to disable state management as dynamically-generated ids
        // can change across page loads, leading to unpredictable results.  The developer
        // should ensure that stable state ids are set for stateful components in real apps.
        Ext.state.Manager.setProvider(new Ext.state.CookieProvider());
       
       	var contentPanel = {
							id: 'content-panel',
							region: 'center', // this is what makes this panel into a region within the containing layout
							margins: '2 5 5 0',
							activeItem: 0,
							border: false,
							autoScroll: true,
							el:'mainviewdiv'
			  };
						
       var treePanel = new Ext.tree.TreePanel({
                    id: 'tree-panel',
                    height: 350,
                    autoScroll: true,
										enableAllCheck:true,
                    rootVisible: false,
                    root: new Ext.tree.AsyncTreeNode({
                        expanded: true,
                        children: [{
																    text:'系统概况',
																    expanded: true,
																    cls:'feeds-node',
																    children:[{
																        text:'实时摘要',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'xitongzhaiyao',
																        leaf:true
																    },{
																        text:'服务概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'syssrvlistnow',
																        leaf:true
																    },{
																        text:'部门概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'sysgroupflow',
																        leaf:true
																    },{
																        text:'人员概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'sysuserflow',
																        leaf:true
																    },{
																        text:'虚拟通道概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'sysxntdflow',
																        leaf:true
																    },{

																        text:'QOS通道概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'sysqostdflow',
																        leaf:true
																    },{
																        text:'策略通道概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'sysruletdflow',
																        leaf:true
																    },{
																        text:'目的访问概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'sysipflow',
																        leaf:true
																    },{
																        text:'网站访问概况',
																        iconCls: 'feed-icon',
																        cls:'feed',
																        id:'syswebflow',
																        leaf:true
																    }]
																		},{
																		    text:'在线人员概况',
																		    cls:'feeds-node',
																		    expanded: true,
																		    children:[{
																		        text:'在线人员',
																		        iconCls: 'feed-icon',
																		        cls:'feed',
																		        id:'userlistinfo',
																		        leaf:true
																		    }]
																		},{
																		    text:'虚拟通道',
																		    cls:'feeds-node',																    
																		    id:'vpath'
																		},{
																		    text:'QOS通道',
																		    cls:'feeds-node',
																		    id:'qos'
																		},{
																		    text:'策略通道',
																		    cls:'feeds-node',
																		    id:'policy'
																		},{
																		    text:'实时连接',
																		    cls:'feeds-node',
																		    children:[{
																		        text:'正常的连接',
																		        id:'zhengchanglj',
																		        iconCls: 'feed-icon',
																		        cls:'feed',
																		        leaf:true
																		    },{
																		        text:'流控的连接',
																		        iconCls: 'feed-icon',
																		        cls:'feed',
																		        id:'liukonglj',
																		        leaf:true
																		    },{
																		        text:'规则阻断的连接',
																		        iconCls: 'feed-icon',
																		        cls:'feed',
																		        id:'guzezuduanlj',
																		        leaf:true
																		    }]
																		}]
                    })
       });
       
       var btn = new Ext.Button({
								text : '22223333',
								handler : function() {
									Ext.MessageBox.alert('1111', '2222222');
								}
							});
			 var tabmainpanel = new Ext.Panel({
			 	        id: 'msamainpanel',
								title : 'panel',
								items : [btn]
				});


       
       treePanel.on('click', function(n){
					    	var sn = this.selModel.selNode || {}; // selNode is null on initial selection
					    	
					    	var myt = Ext.getCmp('msamainpanel');
					    	alert(myt);
								var tab = Ext.getCmp("msamainframe").getActiveTab();
								tab.remove(myt);
					    	tab.doLayout();
//					    	
					    	Ext.Ajax.request({
									method : 'GET', 
							    url:'/msa/main/test.js', 
							    success: function(response,options) 
								  {
								     alert(response.responseText);
								     eval(response.responseText);
						      },
							   failure : function() 
							   {   
								  	Ext.MessageBox.alert('提示','抓包失败');
							   }
							  });

					    	
					    	//if(n.leaf && n.id != sn.id){  // ignore clicks on folders and currently selected node 
								
//								if(n.leaf){  // ignore clicks on folders and currently selected node 
//								 if(n.id=='cpuinfo'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=nasshowcpunow';
//								 }else if(n.id=='zhengchanglj'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltconquery+showtype=1';
//								 }else if(n.id=='liukonglj'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltconquery+showtype=2';
//								 }else if(n.id=='guzezuduanlj'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltconquery+showtype=3';
//								 }else if(n.id=='httplj'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltconquery+showtype=4';
//								 }else if(n.id=='qoshttplj'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltconquery+showtype=5';
//								 }else if(n.id=='blockhttplj'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltconquery+showtype=6';
//								 }else if(n.id=='tongdaozhuangtai'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=ltqosrunlist';
//								 }else if(n.id.substring(0,3)=='qos'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=msaQosDetail+qosid='+n.id.substring(3);
//								 }else if(n.id.substring(0,3)=='vpa'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=msaPathDetail+pathid='+n.id.substring(3);
//								 }else if(n.id.substring(0,3)=='pol'){
//								    mainviewfrm.location.href='/msa/main.xp?Fun=msaRuleHtml+ruleid='+n.id.substring(3);
//								 }else if(n.id=='userlistinfo'){
//								 		mainviewfrm.location.href='/msa/main.xp?Fun=msaShowOnlineUser';
//								 }else{
//									 mainviewfrm.location.href='/msa/nowview/' + n.id+'.htm';
//                 }
//                }
			 }); 
       
      var footBar = new Ext.StatusBar({
				region : "south",
				margins: '2 2 2 2',
				items : ["->", "2011宝创科技版权所有  "]
			});
			
       var viewport = new Ext.Viewport({
            layout:'border',
            items:[
                new Ext.BoxComponent({ // raw
                    region:'north',
                    el: 'north',
                    height:32
                }), {
                    region:'east',
                    title: '帮助',
                    collapsible: true,
                    collapsed:true,
                    split:true,
                    width: 180,
                    minSize: 175,
                    maxSize: 400,
                    layout:'fit',
                    margins:'0 5 0 0',
                    items:
                        new Ext.TabPanel({
                            border:false,
                            activeTab:1,
                            tabPosition:'bottom',
                            items:[{
                                html:'<p>A TabPanel component can be a region.</p>',
                                title: 'A Tab',
                                autoScroll:true
                            }]
                        })
                },{
                    region:'west',
                    id:'west-panel',
                    title:'功能导航',
                    split:true,
                    width: 200,
                    minSize: 175,
                    maxSize: 400,
                    collapsible: true,
                    margins:'0 0 0 5',
                    layout:'accordion',
                    layoutConfig:{
                        animate:true
                    },
                    items: [{
                        title:'实时状态',
                        border:false,
                        iconCls:'nav',
                        layout: 'fit',
								    	  id: 'layout-browser',
								        border: false,
								        split:true,
										    margins: '2 0 5 5',
										    items: [treePanel]
                    },{
                        title:'Settings',
                        html:'<p>Some settings in here.</p>',
                        border:false,
                        iconCls:'settings'
                    }]
                },
                new Ext.TabPanel({
                    region:'center',
                    deferredRender:false,
                    activeTab:0,
                    id: 'msamainframe',
                    items:[
                      new Ext.Panel({
												title : '首页',
												autoScroll : true,
												layout : 'fit',
												border : false,
												iconCls : 'house',
												items:[tabmainpanel]
											})]
                }),footBar
             ]
        });
    });
	</script>
</head>
<body>



<div id="north">
<TABLE border=0 cellPadding=0 cellSpacing=0 width="100%" class="x-panel-header" >
  <TR>
    <TD width="80%"   style="padding:6px 4px 5px 6px;" >
    宝创MSA系统
    </TD>
    <TD width="20%" ></TD>
    </TR></TABLE>
</div>

<div style="display:none;">
        <div id="proxy"></div>
        <div id="mainviewdiv">
        
        </div>
    </div>
<script>
//document.all("mainviewfrm").style.height=screen.height-250;
</script>

 </body>
</html>
